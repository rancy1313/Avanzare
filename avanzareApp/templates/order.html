{% extends "base.html" %} {% block title %}Home{% endblock %}
{% block content %}

    <h1 align="center"> Hello {{ user.first_name }}, here is your order. </h1>

{% for item in new_order.items %}
    {{ item.name }}
    {% set tmp = "$" + (item.price | string) %}
    {{ tmp }}

    <button type="button" class="close" onClick="deleteOrderItem({{ item.id }})">
        <span aria-hidden="true">&times;</span>
    </button>
    <br />
{% endfor %}
<!-- This if statement is needed to fix $-0.00 bug when clicking too fast -->
{% if "${:,.2f}".format(new_order.total) == "$-0.00" %}
   <div>Total: $0.00</div>
{% else %}
    <div>Total: {{ "${:,.2f}".format(new_order.total) }}</div>
{% endif %}


<form method="POST">
    <div>Have any comments or requests</div>
    <textarea name="comment" id="comment" class="form-control"></textarea>
    <br />
    <button type="submit" class="btn btn-primary">Complete Order</button>
</form>

    <h1 align="center"> DINNER MENU </h1>
        <ul class="list-group list-group-flush" id="items">
            {% set gf = "(GF)" %}
            {% set v = "(V)" %}
            {% set gfv = "(GF and V)" %}

            {% set print_once = 1 %}
            {% for menu in ["APPETIZERS", "SALADS", "PIZZAS", "PASTAS", "ENTREES", "SIDES", "DESSERT MENU", "AFTER DINNER DRINKS", "COCKTAILS", "BOTTLE", "DRAFT"] %}
                {% if print_once == 1 %}
                    {% if menu == "DESSERT MENU" %}
                        <h1 align="center"> DESSERTS </h1>
                        {% set print_once = 0 %}
                    {% elif menu == "AFTER DINNER DRINKS" %}
                        <h1 align="center"> AFTER DINNER DRINKS </h1>
                        {% set print_once = 0 %}
                    {% elif menu == "COCKTAILS" %}
                        <h1 align="center"> COCKTAILS </h1>
                        {% set print_once = 0 %}
                    {% elif menu == "BOTTLE" %}
                        <h1 align="center"> BEER </h1>
                        <div align="center">{{ menu }}</div>
                        {% set print_once = 0 %}
                    {% else %}
                        <div align="center">{{ menu }}</div>
                        {% set print_once = 0 %}
                    {% endif %}
                {% endif %}
              {% for item in items %}
                    {% if item.menu_type == menu %}
                      <li class="list-group-item">

                          {{ item.name }}
                          {% set tmp = "$" + (item.price | string) %}
                          {{ tmp }}

                          {% if item.gluten_free == "GLUTEN FREE" %}
                            {{ gf }}
                          {% endif %}
                          {% if item.vegan == "VEGAN" %}
                              {{ v }}
                          {% endif %}
                          {% if (item.gluten_free == "GLUTEN FREE") and (item.vegan == "VEGAN") %}
                              {{ gfv }}
                          {% endif %}
                          <br />
                          {{ item.description }}
                          <br />
                          <form action="/add-to-order/{{ new_order.id }}" method="POST">
                              <div class="form-group">
                                    <label for="quantity">Quantity: </label>
                                    <input
                                            type="quantity"
                                            class="form-control"
                                            id="quantity"
                                            name="quantity"
                                            placeholder="Max 10 at a time"
                                    />
                                  {% if (item.gluten_free == "GLUTEN FREE") or (item.vegan == "VEGAN") %}
                                    <div>Gluten Free/Vegan</div>
                                    <select class="selectpicker" type="dish_accommodation" id="dish_accommodation" name="dish_accommodation">
                                      <optgroup label="CHOOSE ONE" >
                                          <option>REGULAR</option>
                                          {% if item.gluten_free == "GLUTEN FREE" %}
                                          <option>GLUTEN FREE</option>
                                          {% endif %}
                                          {% if item.vegan == "VEGAN" %}
                                          <option>VEGAN</option>
                                          {% endif %}
                                          {% if (item.gluten_free == "GLUTEN FREE") and (item.vegan == "VEGAN") %}
                                          <option>GLUTEN FREE AND VEGAN</option>
                                          {% endif %}
                                      </optgroup>
                                    </select>
                                  {% endif %}

                                  <textarea hidden
                                            type="itemId"
                                            id="itemId"
                                            name="itemId">{{item.id}}</textarea>
                                  <textarea hidden
                                            type="complete_order"
                                            id="complete_order"
                                            name="complete_order">FALSE</textarea>
                              </div>
                              <button>Add to order</button>
                          </form>
                      </li>
                    {% endif %}
              {% endfor %}
            {% set print_once = 1 %}
            {% endfor %}
        </ul>


<!--
<h1 align="center"> DESSERTS </h1>
        <ul class="list-group list-group-flush">
          {% for item in items %}
                {% if item.menu_type == "DESSERT MENU" %}
                  <li class="list-group-item">
                      {{ item.name }}
                      {% set tmp = "$" + (item.price | string) %}
                      {{ tmp }}
                      <div style="display: inline-block;">
                          {% if item.gluten_free == "GLUTEN FREE" %}
                          <a class="nav-item nav-link" href="{{ url_for('views.add_to_order', item_id=item.id, order_id=new_order.id, gf=1, v=0, gfv=0) }}">(GF)</a>
                          {% endif %}
                      </div>
                      <div style="display: inline-block;">
                          {% if item.vegan == "VEGAN" %}
                          <a class="nav-item nav-link" href="{{ url_for('views.add_to_order', item_id=item.id, order_id=new_order.id, gf=0, v=1, gfv=0) }}">(V)</a>
                          {% endif %}
                      </div>
                      <div style="display: inline-block;">
                          {% if (item.gluten_free == "GLUTEN FREE") and (item.vegan == "VEGAN") %}
                          <a class="nav-item nav-link"  href="{{ url_for('views.add_to_order', item_id=item.id, order_id=new_order.id, gf=0, v=0, gfv=1) }}">(GF and V)</a>
                          {% endif %}
                      </div>
                      <br />
                      {{ item.description }}
                      <br />

                  </li>
                {% endif %}

          {% endfor %}
        </ul>

<h1 align="center"> AFTER DINNER DRINKS </h1>
        <ul class="list-group list-group-flush">
          {% for item in items %}
                {% if item.menu_type == "AFTER DINNER DRINKS" %}
                  <li class="list-group-item">
                      {{ item.name }}
                      {% set tmp = "$" + (item.price | string) %}
                      {{ tmp }}
                      <div style="display: inline-block;">
                          {% if item.gluten_free == "GLUTEN FREE" %}
                          <a class="nav-item nav-link" href="{{ url_for('views.add_to_order', item_id=item.id, order_id=new_order.id, gf=1, v=0, gfv=0) }}">(GF)</a>
                          {% endif %}
                      </div>
                      <div style="display: inline-block;">
                          {% if item.vegan == "VEGAN" %}
                          <a class="nav-item nav-link" href="{{ url_for('views.add_to_order', item_id=item.id, order_id=new_order.id, gf=0, v=1, gfv=0) }}">(V)</a>
                          {% endif %}
                      </div>
                      <div style="display: inline-block;">
                          {% if (item.gluten_free == "GLUTEN FREE") and (item.vegan == "VEGAN") %}
                          <a class="nav-item nav-link"  href="{{ url_for('views.add_to_order', item_id=item.id, order_id=new_order.id, gf=0, v=0, gfv=1) }}">(GF and V)</a>
                          {% endif %}
                      </div>
                      <br />
                      {{ item.description }}
                      <br />

                  </li>
                {% endif %}

          {% endfor %}
        </ul>

<h1 align="center"> COCKTAILS </h1>
        <ul class="list-group list-group-flush">
          {% for item in items %}
                {% if item.menu_type == "COCKTAILS" %}
                  <li class="list-group-item">
                      {{ item.name }}
                      {% set tmp = "$" + (item.price | string) %}
                      {{ tmp }}
                      <div style="display: inline-block;">
                          {% if item.gluten_free == "GLUTEN FREE" %}
                          <a class="nav-item nav-link" href="{{ url_for('views.add_to_order', item_id=item.id, order_id=new_order.id, gf=1, v=0, gfv=0) }}">(GF)</a>
                          {% endif %}
                      </div>
                      <div style="display: inline-block;">
                          {% if item.vegan == "VEGAN" %}
                          <a class="nav-item nav-link" href="{{ url_for('views.add_to_order', item_id=item.id, order_id=new_order.id, gf=0, v=1, gfv=0) }}">(V)</a>
                          {% endif %}
                      </div>
                      <div style="display: inline-block;">
                          {% if (item.gluten_free == "GLUTEN FREE") and (item.vegan == "VEGAN") %}
                          <a class="nav-item nav-link"  href="{{ url_for('views.add_to_order', item_id=item.id, order_id=new_order.id, gf=0, v=0, gfv=1) }}">(GF and V)</a>
                          {% endif %}
                      </div>
                      <br />
                      {{ item.description }}
                      <br />
                  </li>
                {% endif %}

          {% endfor %}
        </ul>

<h1 align="center"> BEER </h1>
        <ul class="list-group list-group-flush" >
            {% set BEER_sub_menus = ["BOTTLE", "DRAFT"] %}
            {% set print_once = 1 %}
            {% for menu in BEER_sub_menus %}
                {% if print_once == 1 %}
                    <div align="center">{{ menu }}</div>
                    {% set print_once = 0 %}
                {% endif %}
                {% for item in items %}
                    {% if item.menu_type == menu %}
                        <li class="list-group-item">
                            {{ item.name }}
                            {% set tmp = "$" + (item.price | string) %}
                            {{ tmp }}
                            <div style="display: inline-block;">
                                  {% if item.gluten_free == "GLUTEN FREE" %}
                                  <a class="nav-item nav-link" href="{{ url_for('views.add_to_order', item_id=item.id, order_id=new_order.id, gf=1, v=0, gfv=0) }}">(GF)</a>
                                  {% endif %}
                            </div>
                            <div style="display: inline-block;">
                                  {% if item.vegan == "VEGAN" %}
                                  <a class="nav-item nav-link" href="{{ url_for('views.add_to_order', item_id=item.id, order_id=new_order.id, gf=0, v=1, gfv=0) }}">(V)</a>
                                  {% endif %}
                            </div>
                            <div style="display: inline-block;">
                                  {% if (item.gluten_free == "GLUTEN FREE") and (item.vegan == "VEGAN") %}
                                  <a class="nav-item nav-link"  href="{{ url_for('views.add_to_order', item_id=item.id, order_id=new_order.id, gf=0, v=0, gfv=1) }}">(GF and V)</a>
                                  {% endif %}
                            </div>
                            <br />
                            {{ item.description }}
                            <br />
                      </li>
                    {% endif %}
              {% endfor %}
            {% set print_once = 1 %}
            {% endfor %}
            </ul>
            -->

{% endblock %}