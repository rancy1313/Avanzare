{% extends "base.html" %} {% block title %}Home{% endblock %}
{% block content %}
<!-- this page is for the chef to edit the menu. They can add an item and the item must have an input for every field or
 the page will refresh and a warning is flashed. Also, item names are supposed to be unique. The chef can delete and
 edit any item. The page refreshes after any change to see the updated menu -->
<!-- form to get info for add_menu_item() -->
<form method="POST" enctype="multipart/form-data">
    <h1 align="center">Add an item to the menu</h1>
    <div class="form-group">
        <label for="name" >Dish Name</label>
        <input
                type="name"
                class="form-control"
                id="name"
                name="name"
                placeholder="ENTER DISH NAME"
        />
    </div>
    <div class="form-group">
        <label for="price">Price</label>
        <br />
        $
        <input
                type="price"
                class="currencyinput"
                id="price"
                name="price"
                placeholder="ENTER DISH PRICE"
        />
    </div>
    <div class="form-group">
        <label for="description">Description</label>
        <input
                type="description"
                class="form-control"
                id="description"
                name="description"
                placeholder="ENTER DISH DESCRIPTION"
        />
    </div>
    <div>Gluten Free Availability</div>
    <select class="selectpicker" type="gluten_free" id="gluten_free" name="gluten_free">
        <option>NO</option>
        <option>GLUTEN FREE</option>
    </select>
    <div>Vegan Availability</div>
    <select class="selectpicker" type="vegan" id="vegan" name="vegan">
        <option>NO</option>
        <option>VEGAN</option>
    </select>
    <div>Menu Type</div>
    <select class="selectpicker" type="menu_type" id="menu_type" name="menu_type">
        <optgroup label="DINNER MENU" >
            <option>APPETIZERS</option>
            <option>SALADS</option>
            <option>PIZZAS</option>
            <option>PASTAS</option>
            <option>ENTREES</option>
            <option>SIDES</option>
        </optgroup>
        <option>DESSERT MENU</option>
        <option>AFTER DINNER DRINKS</option>
        <option>COCKTAILS</option>
        <optgroup label="BEER">
            <option>BOTTLE</option>
            <option>DRAFT</option>
        </optgroup>
    </select>
    <br />
    <div>Item Picture</div>
    <input type="file" name="file" accept="image/*"/>
    <br />
    <br />
    <button type="submit" class="btn btn-primary">Add Item</button>
</form>
<br />
<!-- creates black line around menu -->
<div class="blackLine">
    <br />
    <!-- Since DINNER MENU is the first option I included out of the for loop-->
    <!-- This is one for loop that will create the menu instead of making a for loop for each menu type-->
    <!-- It loops through the menu types and only shows a header for each type once and displays menu item if menu type matches-->
    <h1 align="center"> DINNER MENU </h1>
    <ul class="list-group list-group-flush" id="items">
        {% set print_once = 1 %}
        {% for menu in ["APPETIZERS", "SALADS", "PIZZAS", "PASTAS", "ENTREES", "SIDES", "DESSERT MENU", "AFTER DINNER DRINKS", "COCKTAILS", "BOTTLE", "DRAFT"] %}
            {% if print_once == 1 %}
                {% if menu == "DESSERT MENU" %}
                    <h1 align="center"> DESSERTS </h1>
                    {% set print_once = 0 %}
                {% elif menu == "AFTER DINNER DRINKS" %}
                    <h1 align="center"> AFTER DINNER DRINKS </h1>
                    {% set print_once = 0 %}
                {% elif menu == "COCKTAILS" %}
                    <h1 align="center"> COCKTAILS </h1>
                    {% set print_once = 0 %}
                {% elif menu == "BOTTLE" %}
                    <h1 align="center"> BEER </h1>
                    <div align="center">{{ menu }}</div>
                    {% set print_once = 0 %}
                {% else %}
                    <div align="center">{{ menu }}</div>
                    {% set print_once = 0 %}
                {% endif %}
            {% endif %}
            <!-- Items are all the menu items, made by headChef -->
            {% for item in items %}
                {% if item.menu_type == menu %}
                    <li class="list-group-item">
                        <div class="container2" align="center">
                            <div class="image">
                                {% set tmp = item.name + '.jpg' %}
                                <img class="img-responsive" src="{{ url_for('views.send_image', filename=tmp) }}" width="200" height="200">
                            </div>
                            <div class="text">
                                {{ item.name }}
                                {% if item.gluten_free == "GLUTEN FREE" %}
                                    <i>{{ "(GF)" }}</i>
                                {% endif %}
                                {% if item.vegan == "VEGAN" %}
                                    <i>{{ "(V)" }}</i>
                                {% endif %}
                                <!--item.price is a float so needs to be converted to string to display $ format-->
                                {% set tmp = "$" + (item.price | string) %}
                                {{ tmp }}
                                <br />
                                {{ item.description }}
                                <!-- shows a button to edit and delete menu item by passing id to corresponding function -->
                                <a class="nav-item nav-link" href="{{ url_for('views.edit_redirect', id=item.id) }}">Edit Entry</a>
                                <button type="button" onClick="deleteMenuItem({{ item.id }})">
                                    <span aria-hidden="true">&times; Delete Entry</span>
                                </button>
                            </div>
                        </div>
                    </li>
                {% endif %}
            {% endfor %}
            {% set print_once = 1 %}
        <!-- print once var resets after nested loop goes through all items on the menu -->
        {% endfor %}
    </ul>
    <br />
</div>
<br />
<br />

{% endblock %}


